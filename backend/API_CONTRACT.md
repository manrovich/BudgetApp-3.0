## 0. Назначение

Этот документ фиксирует правила оформления публичного API-контракта: `Request/Response`, типы данных, валидацию, аннотации и документацию (OpenAPI).

Цель — единообразный стиль, предсказуемые ошибки, самодокументируемый API и устойчивость к изменениям доменной реализации.

---

## 1. Контракт API

* **Request/Response** — публичный транспортный контракт HTTP API.
* Request/Response **не используют доменные типы** (агрегаты, VO, доменные id).
* Доменная логика и инварианты живут в `domain`, бизнес-проверки — в `application` (use-cases/policy).

---

## 2. Типы данных в Request/Response

### 2.1. Общие правила

* Предпочтительны **типизированные Java-типы**, а не `String`.
* Исключение: **идентификаторы доменных сущностей**.

### 2.2. Идентификаторы

* Идентификаторы, соответствующие `domain.kernel.id.*`, в Request/Response представлены как:

    * `String`
* Причина: API не привязывается к внутренней реализации идентификаторов (UUID/String/Long/иное).

Валидация формата идентификаторов — на уровне Request (см. раздел 3).

### 2.3. Числа

* Для десятичных чисел используем:

    * `BigDecimal`
* Если выбор между `String` и `BigDecimal` для decimal — выбираем `BigDecimal`.

### 2.4. Даты и время

* Для времени события используем:

    * `Instant`
* Даты/время не передаются строкой (кроме случаев, когда это сознательная оптимизация под специфичный формат).

---

## 3. Валидация Request

### 3.1. Обязательность аннотаций

Для каждого поля Request должно быть явно определено:

* обязательность (`@NotNull`, `@NotBlank`) **или** допустимость `null` (отсутствие `@NotNull` / `@NotBlank`).
* ограничение/формат (`@Size`, `@Pattern`, `@UUID`, `@Min/@Max`, `@Digits`, и т.д.) — когда применимо.

### 3.2. Приоритет пакетов аннотаций

* Предпочтительно: `jakarta.validation.constraints.*`
* Допустимо: `org.hibernate.validator.constraints.*` (например, `@UUID`)

`@Nullable` используется только как вспомогательная документация/подсказка IDE и не заменяет Bean Validation.

### 3.3. Правила порядка аннотаций

* `@Schema` (если есть) ставится **первой**.
* Далее — аннотации обязательности (`@NotNull` / `@NotBlank`).
* Далее — ограничения (`@UUID`, `@Size`, `@Pattern`, `@Digits`, etc.)